<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chicago/Cook County Value Per Acre Map</title>
    <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
    <link
      href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/pmtiles@4.3.0/dist/pmtiles.js"></script>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div id="loading-spinner">
      <div style="text-align: center">
        <div id="loading-spinner-internal"></div>
        <div>Loading parcels...</div>
      </div>
    </div>
    <button id="show-panel-btn" title="Show info panel">
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
      >
        <line x1="3" y1="5" x2="17" y2="5" />
        <line x1="3" y1="10" x2="17" y2="10" />
        <line x1="3" y1="15" x2="17" y2="15" />
      </svg>
    </button>
    <div id="info-panel">
      <button id="panel-toggle" class="panel-toggle" title="Hide info panel">
        <svg
          width="16"
          height="16"
          viewBox="0 0 16 16"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <line x1="2" y1="2" x2="14" y2="14" />
          <line x1="14" y1="2" x2="2" y2="14" />
        </svg>
      </button>
      <h1>Chicago/Cook County Value Per Acre</h1>
      <p>
        Dense, walkable neighborhoods generate more tax value per acre. Learn
        more at
        <a href="https://strongtownschicago.org" target="_blank"
          >StrongTownsChicago.org</a
        >
      </p>

      <button id="toggle-3d">Enable 3D View</button>
      <button id="toggle-cta">Hide CTA Lines</button>
      <button id="toggle-extent">Show All Cook County</button>

      <div id="legend">
        <h3>Value Per Acre</h3>
        <div class="legend-item">
          <span class="legend-color" style="background: #006400"></span>
          <span>$50M+</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #90ee90"></span>
          <span>$10M-$50M</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #ffff00"></span>
          <span>$5M-$10M</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #ffa500"></span>
          <span>$2M-$5M</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #ff6347"></span>
          <span>$1M-$2M</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #dc143c"></span>
          <span>$500k-$1M</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #8b0000"></span>
          <span>&lt;$500k</span>
        </div>
        <div class="legend-item">
          <span class="legend-color" style="background: #999999"></span>
          <span>$0</span>
        </div>
      </div>

      <div id="methodology">
        <h3>Methodology</h3>
        <p style="font-size: 12px; color: #888; line-height: 1.5">
          Market values derived from
          <a
            href="https://datacatalog.cookcountyil.gov/Property-Taxation/Assessor-Assessed-Values/uzyt-m557"
            target="_blank"
            >Cook County 2024 assessed values</a
          >
          using class-specific assessment levels (10% residential, 20%
          nonprofit, 25% commercial). Parcel boundaries from
          <a
            href="https://hub-cookcountyil.opendata.arcgis.com/datasets/5c2e70b7f31349dc83924a98df8fdbbb_2024"
            target="_blank"
            >Cook County GIS</a
          >. CTA lines from
          <a
            href="https://data.cityofchicago.org/Transportation/CTA-L-Rail-Lines/xbyr-jnvx"
            target="_blank"
            >Chicago Data Portal</a
          >. Values represent assessed property tax value per acre of land area.
          Source links for condos and multi-unit properties link to the first
          unit.
        </p>
      </div>

      <div id="open-source">
        <p id="github-repo-section">
          Code for this map is open source and available in this
          <a
            href="https://github.com/StrongTownsChicago/chicago-value-per-acre"
            target="_blank"
            >GitHub repo</a
          >.
        </p>
      </div>
    </div>

    <div id="map"></div>

    <script src="js/app.js"></script>
  </body>
</html>
